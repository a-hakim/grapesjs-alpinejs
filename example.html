<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrapesJS AlpineJS Plugin - Example</title>
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <script src="https://unpkg.com/grapesjs"></script>
    <style>
        body, html {
            margin: 0;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        .demo-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .demo-info h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
        }
        
        .demo-info p {
            margin: 5px 0;
            opacity: 0.9;
        }
        
        .demo-instructions {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .demo-instructions h3 {
            margin: 0 0 10px 0;
            color: #495057;
        }
        
        .demo-instructions ul {
            margin: 0;
            padding-left: 20px;
            color: #6c757d;
        }
        
        .demo-instructions li {
            margin: 5px 0;
        }
        
        .demo-instructions code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9em;
            color: #e83e8c;
        }
    </style>
</head>
<body>
    <div class="demo-info">
        <h1>ðŸŽ¨ GrapesJS AlpineJS Plugin Demo</h1>
        <p>Build interactive components visually with Alpine.js</p>
        <p><small>Version 1.0.0</small></p>
    </div>

    <div class="demo-instructions">
        <h3>Quick Start Guide:</h3>
        <ul>
            <li><strong>ðŸ“¦ Blocks:</strong> Find Alpine.js blocks in the left panel (Accordion, Tabs, Modal, Counter)</li>
            <li><strong>ðŸŽ¯ Traits:</strong> Select any component and find "Alpine.js" traits in the right panel</li>
            <li><strong>âš¡ Live Preview:</strong> All Alpine.js features work directly in the canvas!</li>
            <li><strong>ðŸ’¾ Export:</strong> Get clean HTML with Alpine.js directives ready to use</li>
            <li><strong>ðŸ“š Docs:</strong> Check <code>USAGE.md</code> for detailed examples</li>
        </ul>
    </div>

    <div id="gjs"></div>

    <script type="text/javascript">
        // Initialize GrapesJS with AlpineJS plugin
        const editor = grapesjs.init({
            container: '#gjs',
            height: 'calc(100vh - 150px)',
            fromElement: false,
            noticeOnUnload: false,
            storageManager: false,
            
            // Plugin configuration
            plugins: ['grapesjs-alpinejs'],
            pluginsOpts: {
                'grapesjs-alpinejs': {
                    // Alpine.js CDN (v3.x recommended)
                    alpineCdn: 'https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js',
                    // Category labels
                    categoryLabel: 'Alpine.js',
                    blockCategory: 'Alpine.js',
                }
            },

            // Canvas configuration
            canvas: {
                styles: [],
                scripts: [],
            },

            // Panels configuration
            panels: {
                defaults: [
                    {
                        id: 'basic-actions',
                        el: '.panel__basic-actions',
                        buttons: [
                            {
                                id: 'visibility',
                                active: true,
                                className: 'btn-toggle-borders',
                                label: '<i class="fa fa-clone"></i>',
                                command: 'sw-visibility',
                            },
                            {
                                id: 'export',
                                className: 'btn-open-export',
                                label: '<i class="fa fa-code"></i>',
                                command: 'export-template',
                                context: 'export-template',
                            },
                            {
                                id: 'show-json',
                                className: 'btn-show-json',
                                label: '<i class="fa fa-file-code"></i>',
                                context: 'show-json',
                                command(editor) {
                                    editor.Modal.setTitle('Components JSON')
                                        .setContent(`<textarea style="width:100%; height: 450px;">
${JSON.stringify(editor.getComponents(), null, 2)}
                                        </textarea>`)
                                        .open();
                                },
                            },
                            {
                                id: 'preview',
                                className: 'btn-preview',
                                label: '<i class="fa fa-eye"></i>',
                                command: 'preview',
                            },
                            {
                                id: 'clear-all',
                                className: 'btn-clear',
                                label: '<i class="fa fa-trash"></i>',
                                command: 'core:canvas-clear',
                            },
                        ],
                    },
                ],
            },

            // Device Manager
            deviceManager: {
                devices: [
                    {
                        name: 'Desktop',
                        width: '',
                    },
                    {
                        name: 'Tablet',
                        width: '768px',
                        widthMedia: '992px',
                    },
                    {
                        name: 'Mobile',
                        width: '320px',
                        widthMedia: '480px',
                    },
                ],
            },

            // Style Manager
            styleManager: {
                sectors: [
                    {
                        name: 'General',
                        buildProps: ['float', 'display', 'position', 'top', 'right', 'left', 'bottom'],
                    },
                    {
                        name: 'Dimension',
                        open: false,
                        buildProps: ['width', 'height', 'max-width', 'min-height', 'margin', 'padding'],
                    },
                    {
                        name: 'Typography',
                        open: false,
                        buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-align'],
                    },
                    {
                        name: 'Decorations',
                        open: false,
                        buildProps: ['background-color', 'border-radius', 'border', 'box-shadow', 'background'],
                    },
                    {
                        name: 'Extra',
                        open: false,
                        buildProps: ['transition', 'perspective', 'transform', 'cursor'],
                        properties: [
                            {
                                type: 'slider',
                                property: 'opacity',
                                defaults: 1,
                                step: 0.01,
                                max: 1,
                                min: 0,
                            }
                        ]
                    },
                ],
            },

            // Block Manager
            blockManager: {
                appendTo: '#blocks',
            },

            // Layer Manager
            layerManager: {
                appendTo: '#layers-container',
            },

            // Trait Manager
            traitManager: {
                appendTo: '#trait-container',
            },

            // Selector Manager
            selectorManager: {
                appendTo: '#styles-container',
            },
        });

        // Add demo content
        editor.on('load', () => {
            // Add welcome message
            editor.addComponents(`
                <div style="padding: 40px; text-align: center; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; margin: 20px;">
                    <h2 style="margin: 0 0 15px 0; font-size: 32px;">Welcome to GrapesJS AlpineJS! ðŸŽ‰</h2>
                    <p style="font-size: 18px; opacity: 0.95; margin: 0 0 20px 0;">
                        Drag and drop Alpine.js blocks from the left panel to get started.
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                        <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; backdrop-filter: blur(10px);">
                            <strong>ðŸ“¦ 4 Pre-built Blocks</strong>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; backdrop-filter: blur(10px);">
                            <strong>âš¡ 12 Alpine.js Traits</strong>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; backdrop-filter: blur(10px);">
                            <strong>ðŸŽ¨ Live Preview</strong>
                        </div>
                    </div>
                </div>
            `);

            console.log('âœ… GrapesJS AlpineJS Plugin loaded successfully!');
            console.log('ðŸ“š Check USAGE.md for detailed documentation');
            console.log('ðŸš€ Available blocks: Accordion, Tabs, Modal, Counter');
        });

        // Log component selection for debugging
        editor.on('component:selected', (component) => {
            console.log('Selected component:', component.get('type'));
            console.log('Traits:', component.get('traits'));
        });

        // Make editor available globally for debugging
        window.editor = editor;
    </script>
</body>
</html>
